<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pedidos y Reservas - Man√° Restobar</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo" onclick="window.location.href='index.html'">
                <img src="images/logo-brown.jpeg" alt="Man√° Restobar" class="logo-img">
            </div>
            <div class="hamburger" id="hamburger"><span></span><span></span><span></span></div>
            <ul class="nav-menu" id="navMenu">
                <li><a href="index.html">Inicio</a></li>
                <li><a href="nosotros.html">Nosotros</a></li>
                <li><a href="menu.html">Men√∫</a></li>
                <li><a href="menu-dia.html">Men√∫ del D√≠a</a></li>
                <li><a href="reserva.html" class="active">Reservas</a></li>
                <li><a href="admin.html">Admin</a></li>
            </ul>
        </div>
    </nav>

    <main class="reserva-page">
        <div class="container">
            <h1 class="section-title">¬øQu√© deseas hacer hoy?</h1>

            <div class="order-type-selector">
                <button type="button" class="type-btn active" onclick="setOrderType('reserva')">
                    <i class="fa-solid fa-chair"></i> Reservar Mesa
                </button>
                <button type="button" class="type-btn" onclick="setOrderType('domicilio')">
                    <i class="fa-solid fa-motorcycle"></i> Pedir Domicilio
                </button>
            </div>

            <div id="minHoursWarning" class="min-hours-warning" style="display:block;">
                <strong>‚è∞ Informaci√≥n Importante</strong>
                <span id="warningText"></span>
            </div>

            <div id="deliveryWarning" class="min-hours-warning" style="display:none; background-color: #e3f2fd; border-color: #90caf9; color: #0d47a1;">
                <strong>üõµ Informaci√≥n de Domicilio</strong><br>
                Se cobrar√° un adicional de <strong>$1.000</strong> por empaques.<br>
                <em>El costo del domicilio var√≠a seg√∫n la distancia y se acuerda por WhatsApp.</em>
            </div>

            <div class="reserva-wrapper">
                <div class="reserva-left">
                    <h2>1. Selecciona tus Platos</h2>
                    <div class="reserva-menu-grid" id="reservaMenuGrid">
                        <p style="text-align: center; color: #999;">Cargando men√∫...</p>
                    </div>
                </div>

                <div class="reserva-right">
                    <div class="reserva-summary">
                        <h2>Resumen del Pedido</h2>
                        <div class="summary-items" id="summaryItems">
                            <p class="empty-msg" style="text-align: center; color: #999;">Ning√∫n plato seleccionado</p>
                        </div>
                        
                        <div id="packagingCostRow" style="display:none; justify-content: space-between; padding: 0.5rem 0; border-top: 1px dashed #ccc; color: #666;">
                            <span>Empaques (Icopor)</span>
                            <strong>$1.000</strong>
                        </div>

                        <div class="summary-total">
                            <strong>TOTAL ESTIMADO</strong>
                            <span id="totalPrice">$0</span>
                        </div>
                    </div>

                    <div id="dateTimeSection">
                        <div class="calendar-section">
                            <h2>2. Selecciona Fecha</h2>
                            <div class="calendar-container">
                                <div class="calendar-nav">
                                    <button type="button" class="calendar-btn" onclick="prevMonth()">‚óÄ</button>
                                    <h3 id="currentMonth"></h3>
                                    <button type="button" class="calendar-btn" onclick="nextMonth()">‚ñ∂</button>
                                </div>
                                <div class="calendar-weekdays">
                                    <div>Dom</div><div>Lun</div><div>Mar</div><div>Mi√©</div><div>Jue</div><div>Vie</div><div>S√°b</div>
                                </div>
                                <div class="calendar-days" id="calendarDays"></div>
                            </div>
                        </div>

                        <div class="form-group">
                            <h3 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.2rem;">3. Selecciona Hora</h3>
                            <div class="capacity-warning" id="capacityWarning"></div>
                            <div class="time-slots-container" id="timeSlotsContainer"></div>
                        </div>
                    </div>

                    <form id="reservationForm" class="reserva-form">
                        <input type="hidden" id="reservationDate">
                        <input type="hidden" id="selectedTimeSlot">
                        
                        <input type="hidden" id="orderType" value="reserva">

                        <h3 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.2rem;">
                            <span id="stepNumber">4</span>. Tus Datos
                        </h3>
                        
                        <div class="form-group">
                            <label>Nombre Completo</label>
                            <input type="text" id="name" placeholder="Ej: Juan P√©rez" required>
                        </div>
                        
                        <div class="form-group">
                            <label>Tel√©fono de Contacto</label>
                            <input type="tel" id="phone" placeholder="Ej: 314 325 8525" required>
                        </div>

                        <div class="form-group" id="addressGroup" style="display: none;">
                            <label>Direcci√≥n de Entrega</label>
                            <textarea id="address" rows="2" placeholder="Ej: Calle 5 #4-20, Casa blanca, segundo piso."></textarea>
                        </div>

                        <div class="form-group" id="guestsGroup">
                            <label>N√∫mero de Personas</label>
                            <input type="number" id="guests" min="1" max="20" value="2">
                        </div>

                        <button type="submit" class="btn btn-primary btn-block" style="margin-top: 1rem;" id="submitBtn">Confirmar Reserva</button>
                    </form>
                </div>
            </div>
        </div>
    </main>

    <div id="confirmationModal" class="modal">
        <div class="modal-content">
            <div class="modal-icon" style="font-size: 4rem;">‚úÖ</div>
            <h2 id="modalTitle">¬°Listo!</h2>
            <p id="modalSubtitle">Finaliza el proceso en WhatsApp.</p>
            <div id="confirmationMessage"></div>
            <button type="button" class="btn btn-primary" onclick="closeModal()" style="margin-top: 1.5rem; width: 100%;">Cerrar</button>
        </div>
    </div>

    <footer class="footer">
        <div class="footer-content">
            <h2 class="footer-main-title">CONT√ÅCTANOS</h2>
            <div class="footer-grid">
                <div class="footer-column">
                    <h4>Direcci√≥n</h4>
                    <p>Cra 9 calle 5 esquina, local 2<br>Ursua, Pamplona<br>Norte de Santander</p>
                    <div class="footer-map-small">
                        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3956.8148024271486!2d-72.6471175889428!3d7.374643212655943!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8e688153a8bf1953%3A0xb67c44d64f68830c!2sMana%20coffee!5e0!3m2!1ses!2sco!4v1764978558013!5m2!1ses!2sco" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                    </div>
                </div>
                <div class="footer-column">
                    <h4>Horarios</h4>
                    <ul><li>Lun - Vie: 4PM - 10PM</li><li>S√°b - Dom: 8AM - 10PM</li></ul>
                </div>
                <div class="footer-column">
                    <h4>Tel√©fono</h4>
                    <p>314 325 8525</p>
                </div>
                <div class="footer-column">
                    <h4>Redes Sociales</h4>
                    <div class="footer-social-icons">
                        <a href="https://www.instagram.com/mana_coffee_pam" target="_blank"><i class="fa-brands fa-instagram"></i></a>
                        <a href="https://www.facebook.com/profile.php?id=61572704497545" target="_blank"><i class="fa-brands fa-facebook-f"></i></a>
                        <a href="https://wa.me/573143258525" target="_blank"><i class="fa-brands fa-whatsapp"></i></a>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer-bottom"><p>¬© 2025 Man√° Restobar. Todos los derechos reservados.</p></div>
    </footer>

    <script src="js/main.js"></script>
    <script src="js/calendar.js"></script>
    <script src="js/reserva.js"></script>
</body>
</html>
